# ToDo (習作)

## 概要

- https://pankun-coder.github.io/ToDo/
- シンプルなToDo
- UIライブラリは React + MUI v5
- データの永続化としてlocalStorageを使用

## 初めて試したこと

### MUI V5

- MUI Compnentを使っただけ
- paletteやstyledとか使ってみたかった
- 複雑なスタイルは使っていないと思うので、だったらMUI Componentのドキュメント読みながら実装するより tailwindでバッと書いた方が早かったかもしれない

### vitest

- ESModuleに対応したかったため
- Jestと同じように書けて移行が簡単だった
- なぜJestで暗黙的に`describe`とか`it`が使えるのか理解していなかったが、`react-app`から`eject`したこともありグローバル変数だったことを知った

### データ永続化手段と取得手段の分離

- もしデータ将来永続化手段をDBに変えたとしてもstorageだけの変更で収められるように意識した
- テストしづらい永続化部分をDIで切り離すことでhookのテストが容易になった

### `yarn eject`

- バンドラの知識が足りていないと感じたため、ejectして中身を見ようと思った
- やっていることはJSを一発のリクエストでまとめて返せるようにしていることと、非JS(CSSとか)をJSに変換してバンドルに入れ込んでいること、みたい
- 使っていないライブラリを削除することでartifactのサイズが半分ほどになった

### GitHub pageでのホスト

- 無料でホストできるということで試してみたかった
- GitHub Actionにユーティリティがあり、簡単にデプロイできた
- `package.json`の`homepage`がビルドに影響することを初めて知った
- ちなみにReactを使ったのもここにホストするため静的ファイルにしたかったというのがある

### Issuesを使ったタスク管理

- 手軽で良い
- 一人で開発してるのもありパッと立ててパッとcloseできる、特にPRからキーワードで閉じれるのが楽

## ポイント

### テスト

- データ取得をDIを使って実装したことでMockRepositoryを注入していい感じに書けたと思う
- デメリットとしてはMockRepositoryが正規のRepositoryと同様に動作している保証がないところ
- あんまりclassを使ったことがなかったのでちょっと満足している

### Uncontrolled component

- タスクの入力欄をrefで管理するようにした
- stateを使った場合に比べて一応レンダリング回数を抑えることができるが、正直stateを使ったとてタスクのカードが1枚レンダリングされるだけなので全く高負荷ではない
- 負荷を抑える必要がないなら拡張性を考えてstateにするかreact-hook-formを使った方が良かったかもしれない

## 問題点 / 改善点

- https://github.com/Pankun-coder/ToDo/issues
